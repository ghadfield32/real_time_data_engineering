# Pipeline Comparison Report

> Auto-generated by `make compare`. Run `make benchmark-all` first to populate results.

## Overview

This report compares **12 pipeline combinations** processing the same NYC Yellow Taxi dataset
(~2.8M rows, January 2024) through different technology stacks.

---

## Tier 1: Core Pipeline Comparison

### Ingestion x Processing x Storage

| # | Pipeline | Ingestion | Processing | Storage | dbt Adapter | E2E Time (s) | Peak Mem (GB) | Services |
|---|----------|-----------|------------|---------|-------------|--------------|---------------|----------|
| 00 | Batch Baseline | Parquet | — | DuckDB | dbt-duckdb | — | — | 1 |
| 01 | Kafka+Flink+Iceberg | Kafka (KRaft) | Flink SQL | Iceberg (MinIO) | dbt-duckdb | — | — | 7 |
| 02 | Kafka+Spark+Iceberg | Kafka (KRaft) | Spark Streaming | Iceberg (MinIO) | dbt-duckdb | — | — | 6 |
| 03 | Kafka+RisingWave | Kafka (KRaft) | RisingWave SQL | RisingWave | dbt-postgres | — | — | 4 |
| 04 | Redpanda+Flink+Iceberg | Redpanda | Flink SQL | Iceberg (MinIO) | dbt-duckdb | — | — | 6 |
| 05 | Redpanda+Spark+Iceberg | Redpanda | Spark Streaming | Iceberg (MinIO) | dbt-duckdb | — | — | 5 |
| 06 | Redpanda+RisingWave | Redpanda | RisingWave SQL | RisingWave | dbt-postgres | — | — | 3 |

### Isolated Variable Comparisons

#### Kafka vs Redpanda (Broker-Only Delta)
| Comparison | Kafka Pipeline | Redpanda Pipeline | Kafka Time | Redpanda Time | Delta |
|------------|---------------|-------------------|------------|---------------|-------|
| Flink+Iceberg | 01 | 04 | — | — | — |
| Spark+Iceberg | 02 | 05 | — | — | — |
| RisingWave | 03 | 06 | — | — | — |

#### Flink vs Spark vs RisingWave (Processor-Only Delta)
| Processor | With Kafka | With Redpanda | Avg Time |
|-----------|-----------|---------------|----------|
| Flink SQL | 01 | 04 | — |
| Spark Structured Streaming | 02 | 05 | — |
| RisingWave Streaming SQL | 03 | 06 | — |

#### Streaming vs Batch Overhead
| Pipeline | Type | E2E Time | Overhead vs Batch |
|----------|------|----------|-------------------|
| 00 Batch | Batch | — | baseline |
| 01-06 | Streaming | — | — |

---

## Tier 2: Orchestration Comparison

All three orchestrators wrap Pipeline 01 (Kafka+Flink+Iceberg) as the base.

| # | Orchestrator | Services | dbt Integration | Scheduling Overhead | Trigger Latency |
|---|-------------|----------|-----------------|--------------------|-----------------|
| 07 | Kestra | — | Plugin (YAML) | — | — |
| 08 | Airflow | — | BashOperator | — | — |
| 09 | Dagster | — | Asset-based | — | — |

### Qualitative Assessment

| Feature | Kestra | Airflow | Dagster |
|---------|--------|---------|---------|
| Config format | YAML flows | Python DAGs | Python assets |
| dbt integration | CLI plugin | BashOperator | dagster-dbt |
| Lineage visibility | Flow graph | DAG graph | Asset graph |
| Error handling | Built-in retry | Retry + alerting | Retry + sensors |
| Learning curve | Low | Medium | Medium |
| Community size | Growing | Very large | Large |

---

## Tier 3: Serving Layer Comparison

| Engine | Query 1 (Daily Rev) | Query 2 (Top Zones) | Query 3 (Hourly) | Query 4 (Complex) |
|--------|--------------------|--------------------|------------------|-------------------|
| ClickHouse (cold) | — | — | — | — |
| ClickHouse (warm) | — | — | — | — |

### BI Tool Comparison
| Feature | Metabase | Superset |
|---------|----------|----------|
| Setup ease | One-click | CLI init |
| Dashboard load | — | — |
| Interactivity | Drag-and-drop | SQL-first |
| Visual quality | Clean, simple | Rich, customizable |

---

## Tier 4: Observability

| Tool | Coverage | Detection Speed | Integration |
|------|----------|-----------------|-------------|
| Elementary | dbt test history, freshness, volume | Post-run | dbt package |
| Soda Core | Bronze/Silver/Gold quality checks | Per-layer | Standalone CLI |

---

## Recommendations

- **Best for low latency**: Pipeline ___ (lowest E2E time)
- **Best for simplicity**: Pipeline 03/06 (fewest services, RisingWave handles processing + storage)
- **Best for existing Spark shops**: Pipeline 02/05 (familiar PySpark API)
- **Most production-ready**: Pipeline 01 (Kafka+Flink+Iceberg — 2026 industry standard)
- **Best orchestrator for dbt**: ___
- **Best BI tool for quick setup**: Metabase (zero-config)
- **Best BI tool for power users**: Superset (SQL-first, highly customizable)

---

*Report generated by `shared/benchmarks/report.py`*
*Run `make benchmark-all && make compare` to populate all metrics.*
