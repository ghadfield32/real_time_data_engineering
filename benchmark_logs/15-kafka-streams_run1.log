docker compose --profile generator down -v --remove-orphans
 Container p15-data-generator  Stopping
 Container p15-data-generator  Stopped
 Container p15-data-generator  Removing
 Container p15-data-generator  Removed
docker compose up -d --build
#1 [internal] load local bake definitions
#1 reading from stdin 670B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 661B 0.0s done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/eclipse-temurin:17-jdk-jammy
#3 ...

#4 [auth] library/eclipse-temurin:pull token for registry-1.docker.io
#4 DONE 0.0s

#5 [internal] load metadata for docker.io/library/eclipse-temurin:17-jre-jammy
#5 DONE 1.2s

#3 [internal] load metadata for docker.io/library/eclipse-temurin:17-jdk-jammy
#3 DONE 1.2s

#6 [internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [build 1/6] FROM docker.io/library/eclipse-temurin:17-jdk-jammy@sha256:ce06e86f8d5adea5e0e0f68c63f322dc1cbbbcd3c2875ff8241b39a57083b164
#7 resolve docker.io/library/eclipse-temurin:17-jdk-jammy@sha256:ce06e86f8d5adea5e0e0f68c63f322dc1cbbbcd3c2875ff8241b39a57083b164 0.0s done
#7 ...

#8 [internal] load build context
#8 transferring context: 336B done
#8 DONE 0.1s

#9 [stage-1 1/3] FROM docker.io/library/eclipse-temurin:17-jre-jammy@sha256:1dd80d55af5f5ddb9cbd0b119f5a396058aa34909ee6abea601ac8cd5b09487a
#9 resolve docker.io/library/eclipse-temurin:17-jre-jammy@sha256:1dd80d55af5f5ddb9cbd0b119f5a396058aa34909ee6abea601ac8cd5b09487a 0.0s done
#9 DONE 0.2s

#10 [stage-1 2/3] WORKDIR /app
#10 DONE 0.1s

#7 [build 1/6] FROM docker.io/library/eclipse-temurin:17-jdk-jammy@sha256:ce06e86f8d5adea5e0e0f68c63f322dc1cbbbcd3c2875ff8241b39a57083b164
#7 sha256:90f93dcabaa5038c1c9d9aba90a2f79893b1aa7870a136371ddb99a8790855d8 2.28kB / 2.28kB 0.1s done
#7 sha256:c6b7fc72549cda2bfee23a03f67d2ea38cda21934fd2c497cb6d490c1b0daa23 160B / 160B 0.1s done
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 0B / 145.63MB 0.3s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 0B / 20.69MB 0.2s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 1.05MB / 20.69MB 0.5s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 3.15MB / 20.69MB 0.6s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 8.39MB / 145.63MB 0.9s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 6.29MB / 20.69MB 0.8s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 8.39MB / 20.69MB 0.9s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 11.53MB / 20.69MB 1.1s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 16.78MB / 145.63MB 1.4s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 14.68MB / 20.69MB 1.2s
#7 sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 20.69MB / 20.69MB 1.5s done
#7 extracting sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 25.17MB / 145.63MB 1.8s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 32.51MB / 145.63MB 2.3s
#7 extracting sha256:0fc91b052a5a123f75dd3a564a69855997249e68bb307aa8030c0a59f8a96d68 0.8s done
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 39.85MB / 145.63MB 2.7s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 47.19MB / 145.63MB 3.2s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 54.53MB / 145.63MB 3.6s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 63.96MB / 145.63MB 4.2s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 72.35MB / 145.63MB 4.8s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 79.69MB / 145.63MB 5.3s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 87.03MB / 145.63MB 5.7s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 94.37MB / 145.63MB 6.2s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 101.71MB / 145.63MB 6.6s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 109.05MB / 145.63MB 7.1s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 116.39MB / 145.63MB 7.5s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 124.78MB / 145.63MB 8.0s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 132.12MB / 145.63MB 8.4s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 141.56MB / 145.63MB 9.0s
#7 sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 145.63MB / 145.63MB 9.3s done
#7 extracting sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f
#7 extracting sha256:f25d452629bd05fee102202de36420bf6b52232df0e853e0dcb97c6547b9767f 1.3s done
#7 DONE 10.9s

#7 [build 1/6] FROM docker.io/library/eclipse-temurin:17-jdk-jammy@sha256:ce06e86f8d5adea5e0e0f68c63f322dc1cbbbcd3c2875ff8241b39a57083b164
#7 extracting sha256:c6b7fc72549cda2bfee23a03f67d2ea38cda21934fd2c497cb6d490c1b0daa23 0.0s done
#7 extracting sha256:90f93dcabaa5038c1c9d9aba90a2f79893b1aa7870a136371ddb99a8790855d8 0.0s done
#7 DONE 10.9s

#11 [build 2/6] WORKDIR /app
#11 DONE 0.1s

#12 [build 3/6] RUN apt-get update && apt-get install -y wget unzip &&     wget -q https://services.gradle.org/distributions/gradle-8.5-bin.zip &&     unzip -q gradle-8.5-bin.zip &&     mv gradle-8.5 /opt/gradle &&     rm gradle-8.5-bin.zip &&     ln -s /opt/gradle/bin/gradle /usr/bin/gradle
#12 0.616 Get:1 http://archive.ubuntu.com/ubuntu jammy InRelease [270 kB]
#12 0.749 Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
#12 0.952 Get:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB]
#12 1.025 Get:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [127 kB]
#12 1.101 Get:5 http://archive.ubuntu.com/ubuntu jammy/restricted amd64 Packages [164 kB]
#12 1.139 Get:6 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [266 kB]
#12 1.187 Get:7 http://archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [17.5 MB]
#12 1.299 Get:8 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [62.6 kB]
#12 1.452 Get:9 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [3,737 kB]
#12 2.268 Get:10 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [6,538 kB]
#12 2.315 Get:11 http://archive.ubuntu.com/ubuntu jammy/main amd64 Packages [1,792 kB]
#12 2.412 Get:12 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [6,749 kB]
#12 2.652 Get:13 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [1,301 kB]
#12 2.808 Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [4,070 kB]
#12 3.050 Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [70.9 kB]
#12 3.055 Get:16 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1,613 kB]
#12 3.161 Get:17 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [37.2 kB]
#12 3.163 Get:18 http://archive.ubuntu.com/ubuntu jammy-backports/main amd64 Packages [83.9 kB]
#12 3.591 Fetched 44.6 MB in 3s (13.9 MB/s)
#12 3.591 Reading package lists...
#12 4.233 Reading package lists...
#12 4.811 Building dependency tree...
#12 4.950 Reading state information...
#12 5.059 wget is already the newest version (1.21.2-2ubuntu1.1).
#12 5.059 Suggested packages:
#12 5.059   zip
#12 5.078 The following NEW packages will be installed:
#12 5.078   unzip
#12 5.200 0 upgraded, 1 newly installed, 0 to remove and 2 not upgraded.
#12 5.200 Need to get 175 kB of archives.
#12 5.200 After this operation, 386 kB of additional disk space will be used.
#12 5.200 Get:1 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 unzip amd64 6.0-26ubuntu3.2 [175 kB]
#12 5.548 debconf: delaying package configuration, since apt-utils is not installed
#12 5.576 Fetched 175 kB in 0s (510 kB/s)
#12 5.607 Selecting previously unselected package unzip.
#12 5.607 (Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 8208 files and directories currently installed.)
#12 5.632 Preparing to unpack .../unzip_6.0-26ubuntu3.2_amd64.deb ...
#12 5.639 Unpacking unzip (6.0-26ubuntu3.2) ...
#12 5.683 Setting up unzip (6.0-26ubuntu3.2) ...
#12 DONE 16.9s

#13 [build 4/6] COPY build.gradle settings.gradle ./
#13 DONE 0.1s

#14 [build 5/6] COPY src ./src
#14 DONE 0.1s

#15 [build 6/6] RUN gradle shadowJar --no-daemon
#15 0.539 
#15 0.539 Welcome to Gradle 8.5!
#15 0.539 
#15 0.539 Here are the highlights of this release:
#15 0.539  - Support for running on Java 21
#15 0.539  - Faster first use with Kotlin DSL
#15 0.539  - Improved error and warning messages
#15 0.539 
#15 0.540 For more details see https://docs.gradle.org/8.5/release-notes.html
#15 0.540 
#15 0.540 To honour the JVM settings for this build a single-use Daemon process will be forked. For more on this, please refer to https://docs.gradle.org/8.5/userguide/gradle_daemon.html#sec:disabling_the_daemon in the Gradle documentation.
#15 1.039 Daemon will be stopped at the end of the build 
#15 15.94 > Task :compileJava
#15 15.94 > Task :processResources NO-SOURCE
#15 15.94 > Task :classes
#15 24.83 > Task :shadowJar
#15 24.83 
#15 24.83 BUILD SUCCESSFUL in 24s
#15 24.83 2 actionable tasks: 2 executed
#15 DONE 25.2s

#16 [stage-1 3/3] COPY --from=build /app/build/libs/*-all.jar app.jar
#16 DONE 0.1s

#17 exporting to image
#17 exporting layers
#17 exporting layers 1.2s done
#17 exporting manifest sha256:b0565617e5cde320a570fc7d82bbd2eecb0b6fe0d90ac45df8e018533eabbc56 0.0s done
#17 exporting config sha256:2d308bf96fc3f1b78d905b5a911ade44ec21236ebfbae7f15d62213b4ef989a6 0.0s done
#17 exporting attestation manifest sha256:0bc60ace72d0e681460b376971a0516b0bd3ef29ff34a6a32639c56109342dc3 0.0s done
#17 exporting manifest list sha256:0b7d1b202464011f88f0e2138144df8daefc3a25417172f72414781109254bd4 0.0s done
#17 naming to docker.io/library/15-kafka-streams-streams-app:latest
#17 naming to docker.io/library/15-kafka-streams-streams-app:latest done
#17 unpacking to docker.io/library/15-kafka-streams-streams-app:latest
#17 unpacking to docker.io/library/15-kafka-streams-streams-app:latest 0.2s done
#17 DONE 1.5s

#18 resolving provenance for metadata file
#18 DONE 0.0s
 15-kafka-streams-streams-app  Built
 Network p15-pipeline-net  Creating
 Network p15-pipeline-net  Created
 Container p15-kafka  Creating
 Container p15-kafka  Created
 Container p15-kafka-init  Creating
 Container p15-kafka-init  Created
 Container p15-streams-app  Creating
 Container p15-streams-app  Created
 Container p15-kafka  Starting
 Container p15-kafka  Started
 Container p15-kafka  Waiting
 Container p15-kafka  Healthy
 Container p15-kafka-init  Starting
 Container p15-kafka-init  Started
 Container p15-kafka-init  Waiting
 Container p15-kafka-init  Exited
 Container p15-streams-app  Starting
 Container p15-streams-app  Started

=== Pipeline 15: Kafka Streams ===
Kafka: localhost:9092
Streams app is running and auto-processing events.

Next: make generate  (produce events)
============================================================
  Pipeline 15 Benchmark: Kafka Streams (Lightweight)
============================================================
make[1]: Entering directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
docker compose --profile generator down -v --remove-orphans
make[1]: Leaving directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
make[1]: Entering directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
docker compose up -d --build
#1 [internal] load local bake definitions
#1 reading from stdin 670B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 661B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/eclipse-temurin:17-jre-jammy
#3 DONE 0.4s

#4 [internal] load metadata for docker.io/library/eclipse-temurin:17-jdk-jammy
#4 DONE 0.4s

#5 [internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [internal] load build context
#6 DONE 0.0s

#7 [build 1/6] FROM docker.io/library/eclipse-temurin:17-jdk-jammy@sha256:ce06e86f8d5adea5e0e0f68c63f322dc1cbbbcd3c2875ff8241b39a57083b164
#7 resolve docker.io/library/eclipse-temurin:17-jdk-jammy@sha256:ce06e86f8d5adea5e0e0f68c63f322dc1cbbbcd3c2875ff8241b39a57083b164 0.0s done
#7 DONE 0.0s

#8 [stage-1 1/3] FROM docker.io/library/eclipse-temurin:17-jre-jammy@sha256:1dd80d55af5f5ddb9cbd0b119f5a396058aa34909ee6abea601ac8cd5b09487a
#8 resolve docker.io/library/eclipse-temurin:17-jre-jammy@sha256:1dd80d55af5f5ddb9cbd0b119f5a396058aa34909ee6abea601ac8cd5b09487a 0.0s done
#8 DONE 0.0s

#6 [internal] load build context
#6 transferring context: 336B done
#6 DONE 0.0s

#9 [stage-1 2/3] WORKDIR /app
#9 CACHED

#10 [build 3/6] RUN apt-get update && apt-get install -y wget unzip &&     wget -q https://services.gradle.org/distributions/gradle-8.5-bin.zip &&     unzip -q gradle-8.5-bin.zip &&     mv gradle-8.5 /opt/gradle &&     rm gradle-8.5-bin.zip &&     ln -s /opt/gradle/bin/gradle /usr/bin/gradle
#10 CACHED

#11 [build 4/6] COPY build.gradle settings.gradle ./
#11 CACHED

#12 [build 5/6] COPY src ./src
#12 CACHED

#13 [build 6/6] RUN gradle shadowJar --no-daemon
#13 CACHED

#14 [build 2/6] WORKDIR /app
#14 CACHED

#15 [stage-1 3/3] COPY --from=build /app/build/libs/*-all.jar app.jar
#15 CACHED

#16 exporting to image
#16 exporting layers done
#16 exporting manifest sha256:b0565617e5cde320a570fc7d82bbd2eecb0b6fe0d90ac45df8e018533eabbc56 done
#16 exporting config sha256:2d308bf96fc3f1b78d905b5a911ade44ec21236ebfbae7f15d62213b4ef989a6 done
#16 exporting attestation manifest sha256:c7654d22a97c31811ae1a18e85c9f68f201220d9b196fbe93fc774f90bab3f1f 0.0s done
#16 exporting manifest list sha256:deb9650f35543953df619bdab3426eee8bdf0c10ee16d950f7fbd89e428a7067 0.0s done
#16 naming to docker.io/library/15-kafka-streams-streams-app:latest done
#16 unpacking to docker.io/library/15-kafka-streams-streams-app:latest
#16 unpacking to docker.io/library/15-kafka-streams-streams-app:latest done
#16 DONE 0.1s

#17 resolving provenance for metadata file
#17 DONE 0.0s
 15-kafka-streams-streams-app  Built
 Network p15-pipeline-net  Creating
 Network p15-pipeline-net  Created
 Container p15-kafka  Creating
 Container p15-kafka  Created
 Container p15-kafka-init  Creating
 Container p15-kafka-init  Created
 Container p15-streams-app  Creating
 Container p15-streams-app  Created
 Container p15-kafka  Starting
 Container p15-kafka  Started
 Container p15-kafka  Waiting
 Container p15-kafka  Healthy
 Container p15-kafka-init  Starting
 Container p15-kafka-init  Started
 Container p15-kafka-init  Waiting
 Container p15-kafka-init  Exited
 Container p15-streams-app  Starting
 Container p15-streams-app  Started

=== Pipeline 15: Kafka Streams ===
Kafka: localhost:9092
Streams app is running and auto-processing events.

Next: make generate  (produce events)
make[1]: Leaving directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
make[1]: Entering directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
docker compose exec kafka /opt/kafka/bin/kafka-topics.sh \
	--bootstrap-server localhost:9092 \
	--create --if-not-exists \
	--topic taxi.raw_trips --partitions 3 --replication-factor 1
WARNING: Due to limitations in metric names, topics with a period ('.') or underscore ('_') could collide. To avoid issues it is best to use either, but not both.
docker compose exec kafka /opt/kafka/bin/kafka-topics.sh \
	--bootstrap-server localhost:9092 \
	--create --if-not-exists \
	--topic taxi.bronze --partitions 3 --replication-factor 1
WARNING: Due to limitations in metric names, topics with a period ('.') or underscore ('_') could collide. To avoid issues it is best to use either, but not both.
docker compose exec kafka /opt/kafka/bin/kafka-topics.sh \
	--bootstrap-server localhost:9092 \
	--create --if-not-exists \
	--topic taxi.silver --partitions 3 --replication-factor 1
WARNING: Due to limitations in metric names, topics with a period ('.') or underscore ('_') could collide. To avoid issues it is best to use either, but not both.
All topics created.
make[1]: Leaving directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
make[1]: Entering directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
MSYS_NO_PATHCONV=1 docker compose run --rm -e MAX_EVENTS=10000 data-generator
 Container p15-kafka  Running
============================================================
  Taxi Trip Event Generator
============================================================
  Broker:     kafka:9092
  Topic:      taxi.raw_trips
  Mode:       burst
  Data:       /data/yellow_tripdata_2024-01.parquet
  Max events: 10,000

  Source: /data/yellow_tripdata_2024-01.parquet (2,964,624 rows, sending 10,000)

============================================================
  GENERATOR COMPLETE
  Events:  10,000
  Elapsed: 0.43s
  Rate:    23,437 events/sec
============================================================
  Metrics written to /tmp/generator_metrics.json
Limited data generation complete (10k events).
make[1]: Leaving directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
Waiting for Kafka Streams processing (10s)...
make[1]: Entering directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'
=== Message Counts ===
raw_trips: 
bronze:    
silver:    
make[1]: Leaving directory 'C:/docker_projects/real_time_data_engineering/pipelines/15-kafka-streams'

============================================================
  BENCHMARK COMPLETE
  Total elapsed: 36s
============================================================
Results saved to benchmark_results/latest.json
docker compose --profile generator down -v --remove-orphans
 Container p15-streams-app  Stopping
 Container p15-streams-app  Stopped
 Container p15-streams-app  Removing
 Container p15-streams-app  Removed
 Container p15-kafka-init  Stopping
 Container p15-kafka-init  Stopped
 Container p15-kafka-init  Removing
 Container p15-kafka-init  Removed
 Container p15-kafka  Stopping
 Container p15-kafka  Stopped
 Container p15-kafka  Removing
 Container p15-kafka  Removed
 Network p15-pipeline-net  Removing
 Network p15-pipeline-net  Removed
make: *** No rule to make target 'clean'.  Stop.
